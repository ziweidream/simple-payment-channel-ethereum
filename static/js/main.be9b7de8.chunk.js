(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{287:function(e,t,a){e.exports=a(611)},292:function(e,t,a){},324:function(e,t){},326:function(e,t){},353:function(e,t){},398:function(e,t){},472:function(e){e.exports=[{constant:!1,inputs:[],name:"claimTimeout",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"amount",type:"uint256"},{name:"signature",type:"bytes"}],name:"close",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"expiration",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"recipient",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"sender",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newExpiration",type:"uint256"}],name:"extend",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_recipient",type:"address"},{name:"duration",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"}]},611:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(69),i=a.n(s),o=(a(292),a(28)),c=a.n(o),u=a(45),l=a(36),m=a(37),d=a(39),p=a(38),g=a(40),h=a(620),f=a(622),E=a(59),b=a(621),v=a(612),y=a(619),S=a(86),x=a(623),w=a(258),M=new(a.n(w).a)(window.web3.currentProvider),C=a(472),O=new M.eth.Contract(C,"0x097Ad6F78Bb483fE2D45B19e1560731E9A465547"),j=a(624),A=function(){return r.a.createElement(j.a,{as:"h1",color:"green"},"Simple Payment Channel",r.a.createElement("div",null," ",r.a.createElement("i",{className:"fab fa-ethereum"})),r.a.createElement(j.a.Subheader,null,"On Ethereum "))},k=a(250),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).constructPaymentMessage=function(e,t){return k.soliditySHA3(["address","uint256"],[e,t])},a.signMessage=function(e,t){M.eth.personal.sign("0x"+e.toString("hex"),"0x12241e7E6595A796b058dc01f291f9B50df8C9B2",function(e,t){console.log(e,t),window.alert("Signature: \n"+t)})},a.signPayment=function(e,t){var n=a.constructPaymentMessage(e,t);a.signMessage(n)},a.onSubmit=function(e){e.preventDefault(),a.setState({loading:!0,errorMessage:""});try{a.signPayment(a.state.contractAddress,a.state.amount)}catch(t){a.setState({errorMessage:t.message})}a.setState({loading:!1})},a.state={amount:"",contractAddress:"",result:"",errorMessage:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(b.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},r.a.createElement(b.a.Field,null,r.a.createElement("label",null," Contract address "),r.a.createElement(y.a,{value:this.state.contractAddress,onChange:function(t){return e.setState({contractAddress:t.target.value})}})),r.a.createElement(b.a.Field,null,r.a.createElement("label",null," Amount (in ether) "),r.a.createElement(y.a,{value:this.state.amount,onChange:function(t){return e.setState({amount:t.target.value})}})),r.a.createElement(x.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),r.a.createElement(v.a,{loading:this.state.loading,positive:!0}," Sign and send! ")))}}]),t}(n.Component),P=a(610),H=a(250),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).prefixed=function(e){return H.soliditySHA3(["string","bytes32"],["\x19Ethereum Signed Message:\n32",e])},a.constructPaymentMessage=function(e,t){return H.soliditySHA3(["address","uint256"],[e,t])},a.recoverSigner=function(e,t){var a=P.fromRpcSig(t),n=P.ecrecover(e,a.v,a.r,a.s);return P.pubToAddress(n).toString("hex")},a.isValidSignature=function(e,t,n,r){var s=a.prefixed(a.constructPaymentMessage(e,t));return a.recoverSigner(s,n).toLowerCase()==P.stripHexPrefix(r).toLowerCase()},a.onSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.setState({loading:!0,errorMessage:""});try{a.isValidSignature(a.state.contractAddress,a.state.amount,a.state.signature,a.state.expectedSigner)&&window.alert("Message Verified!  \nAmount: "+a.state.amount+" ether")}catch(n){a.setState({errorMessage:n.message})}a.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.state={amount:"",contractAddress:"",signature:"",expectedSigner:"",errorMessage:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(b.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},r.a.createElement(b.a.Group,{widths:"equal"},r.a.createElement(b.a.Input,{fluid:!0,label:"Contract Address",value:this.state.contractAddress,onChange:function(t){return e.setState({contractAddress:t.target.value})}}),r.a.createElement(b.a.Input,{fluid:!0,label:"Amount (in ether)",value:this.state.amount,onChange:function(t){return e.setState({amount:t.target.value})}})),r.a.createElement(b.a.Group,{widths:"equal"},r.a.createElement(b.a.Input,{fluid:!0,label:"Signature",value:this.state.signature,onChange:function(t){return e.setState({signature:t.target.value})}}),r.a.createElement(b.a.Input,{fluid:!0,label:"Expected Signer",value:this.state.expectedSigner,onChange:function(t){return e.setState({expectedSigner:t.target.value})}})),r.a.createElement(x.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),r.a.createElement(v.a,{loading:this.state.loading,positive:!0}," Verify Message! ")))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0,errorMessage:""}),e.prev=2,e.next=5,M.eth.getAccounts();case 5:return n=e.sent,e.next=8,O.methods.close(a.state.amount,a.state.signature).send({from:n[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a.setState({errorMessage:e.t0.message});case 13:a.setState({loading:!1});case 14:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),a.state={amount:"",signature:"",errorMessage:"",loading:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(b.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},r.a.createElement(b.a.Group,{widths:"equal"},r.a.createElement(b.a.Input,{fluid:!0,label:"Amount (in ether)",value:this.state.amount,onChange:function(t){return e.setState({amount:t.target.value})}}),r.a.createElement(b.a.Input,{fluid:!0,label:"Signature",value:this.state.signature,onChange:function(t){return e.setState({signature:t.target.value})}})),r.a.createElement(x.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),r.a.createElement(v.a,{loading:this.state.loading,positive:!0}," Close (recipient only) "))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0,errorMessage:""}),e.prev=2,e.next=5,M.eth.getAccounts();case 5:return n=e.sent,e.next=8,O.methods.ClaimTimeout().send({from:n[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),a.setState({errorMessage:e.t0.message});case 13:a.setState({loading:!1});case 14:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),a.state={errorMessage:"",loading:!1},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(b.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},r.a.createElement(x.a,{error:!0,header:"Oops!",content:this.state.errorMessage}),r.a.createElement(v.a,{loading:this.state.loading,positive:!0}," Claim Timeout (sender only) "))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a.setState({loading:!0,errorMessage:""}),e.prev=2,e.next=5,M.eth.getAccounts();case 5:return n=e.sent,r=Number(a.state.newExpiration)+Number(a.state.expirationTime),e.next=9,O.methods.extend(r).send({from:n[0]});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({errorMessage:e.t0.message});case 14:a.setState({loading:!1});case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),a.state={sender:"",recipient:"",expiration:""},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,a,n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.methods.sender().call();case 2:return t=e.sent,e.next=5,O.methods.recipient().call();case 5:return a=e.sent,e.next=8,O.methods.expiration().call();case 8:n=e.sent,r=new Date(1e3*n).toString(),this.setState({sender:t,recipient:a,expiration:r,expirationTime:n,newExpiration:"",errorMessage:"",loading:!1});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundColor:"#d9d9d9"}},r.a.createElement(h.a,{style:{width:"68%",textAlign:"center"}},r.a.createElement(A,null),r.a.createElement(f.a,{color:"green",fluid:!0},r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Description,null,"Sender: ",this.state.sender),r.a.createElement(f.a.Description,null,"Recipient: ",this.state.recipient),r.a.createElement(f.a.Description,null,r.a.createElement(E.a,{name:"hourglass half"}),"Expiration date: ",this.state.expiration)),r.a.createElement(f.a.Content,{extra:!0},r.a.createElement(b.a,{onSubmit:this.onSubmit,error:!!this.state.errorMessage},r.a.createElement(b.a.Field,{inline:!0},r.a.createElement(v.a,{basic:!0,floated:"right",color:"green",size:"small",loading:this.state.loading}," Extend"),r.a.createElement("label",null,"Extend Expiration (sender only)"),r.a.createElement(y.a,{value:this.state.newExpiration,onChange:function(t){return e.setState({newExpiration:t.target.value})}}),r.a.createElement(S.a,null,"seconds")),r.a.createElement(x.a,{error:!0,header:"Oops!",content:this.state.errorMessage})))),r.a.createElement(f.a.Group,{itemsPerRow:2},r.a.createElement(f.a,{color:"green"},r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Close (recipient only)")),r.a.createElement(f.a.Content,{extra:!0},r.a.createElement(T,null))),r.a.createElement(f.a,{color:"green"},r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Claim Timeout (sender only)"),r.a.createElement(f.a.Description,null," ",r.a.createElement("i",{className:"far fa-calendar-times fa-2x"}))),r.a.createElement(f.a.Content,{extra:!0},r.a.createElement(B,null)))),r.a.createElement(f.a.Group,{itemsPerRow:2},r.a.createElement(f.a,{color:"green"},r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Sign Message")),r.a.createElement(f.a.Content,{extra:!0},r.a.createElement(D,null))),r.a.createElement(f.a,{color:"green"},r.a.createElement(f.a.Content,null,r.a.createElement(f.a.Header,null,"Verify Message")),r.a.createElement(f.a.Content,{extra:!0},r.a.createElement(I,null))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[287,1,2]]]);
//# sourceMappingURL=main.be9b7de8.chunk.js.map